C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE CYFLASH
OBJECT MODULE PLACED IN .\DP8051\DP8051_Keil_951\Debug\CyFlash.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\4.2\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -Generated_Source\PSoC3\CyFlash.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB DF(DEBUG) W
                    -L(2) PR(.\DP8051\DP8051_Keil_951\Debug/CyFlash.lst) CD OT(2,SIZE) OJ(.\DP8051\DP8051_Keil_951\Debug\CyFlash.obj)

line level    source

   1          /***************************************************************************//**
   2          * \file CyFlash.c
   3          * \version 5.60
   4          *
   5          * \brief Provides an API for the FLASH/EEPROM.
   6          *
   7          * \note This code is endian agnostic.
   8          *
   9          * \note Documentation of the API's in this file is located in the System
  10          * Reference Guide provided with PSoC Creator.
  11          *
  12          ********************************************************************************
  13          * \copyright
  14          * Copyright 2008-2017, Cypress Semiconductor Corporation. All rights reserved.
  15          * You may use this file only in accordance with the license, terms, conditions,
  16          * disclaimers, and limitations in the end user license agreement accompanying
  17          * the software package with which this file was provided.
  18          *******************************************************************************/
  19          
  20          #include "CyFlash.h"
  21          
  22          /*  The number of EEPROM arrays */
  23          #define CY_FLASH_EEPROM_NUMBER_ARRAYS                 (1u)
  24          
  25          
  26          /*******************************************************************************
  27          * Holds the die temperature, updated by CySetTemp(). Used for flash writing.
  28          * The first byte is the sign of the temperature (0 = negative, 1 = positive).
  29          * The second byte is the magnitude.
  30          *******************************************************************************/
  31          uint8 dieTemperature[CY_FLASH_DIE_TEMP_DATA_SIZE];
  32          
  33          #if(CYDEV_ECC_ENABLE == 0)
  34              static uint8 * rowBuffer = 0;
  35          #endif  /* (CYDEV_ECC_ENABLE == 0) */
  36          
  37          
  38          static cystatus CySetTempInt(void);
  39          static cystatus CyFlashGetSpcAlgorithm(void);
  40          
  41          
  42          /*******************************************************************************
  43          * Function Name: CyFlash_Start
  44          ****************************************************************************//**
  45          *
  46          *  Enable the Flash.
  47          *
  48          *******************************************************************************/
  49          void CyFlash_Start(void) 
  50          {
  51   1          uint8 interruptState;
  52   1      
  53   1          interruptState = CyEnterCriticalSection();
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 2   

  54   1      
  55   1      
  56   1          /***************************************************************************
  57   1          * Enable SPC clock. This also internally enables the 36MHz IMO, since this
  58   1          * is required for the SPC to function.
  59   1          ***************************************************************************/
  60   1          CY_FLASH_PM_ACT_CFG0_REG    |= CY_FLASH_PM_ACT_CFG0_EN_CLK_SPC;
  61   1          CY_FLASH_PM_ALTACT_CFG0_REG |= CY_FLASH_PM_ALTACT_CFG0_EN_CLK_SPC;
  62   1      
  63   1      
  64   1          /***************************************************************************
  65   1          * The wake count defines the number of Bus Clock cycles it takes for the
  66   1          * flash or eeprom to wake up from a low power mode independent of the chip
  67   1          * power mode. Wake up time for these blocks is 5 us.
  68   1          * The granularity of this register is 2 Bus Clock cycles, so a value of 0x1E
  69   1          * (30d) defines the wake up time as 60 cycles of the Bus Clock.
  70   1          * This register needs to be written with a value dependent on the Bus Clock
  71   1          * frequency so that the duration of the cycles is equal to or greater than
  72   1          * the 5 us delay required.
  73   1          ***************************************************************************/
  74   1          CY_FLASH_SPC_FM_EE_WAKE_CNT_REG = CY_FLASH_SPC_FM_EE_WAKE_CNT_80MHZ;
  75   1      
  76   1      
  77   1          /***************************************************************************
  78   1          * Enable flash. Active flash macros consume current, but re-enabling a
  79   1          * disabled flash macro takes 5us. If the CPU attempts to fetch out of the
  80   1          * macro during that time, it will be stalled. This bit allows the flash to
  81   1          * be enabled even if the CPU is disabled, which allows a quicker return to
  82   1          * code execution.
  83   1          ***************************************************************************/
  84   1          CY_FLASH_PM_ACT_CFG12_REG    |= CY_FLASH_PM_ACT_CFG12_EN_FM;
  85   1          CY_FLASH_PM_ALTACT_CFG12_REG |= CY_FLASH_PM_ALTACT_CFG12_EN_FM;
  86   1      
  87   1          while(0u == (CY_FLASH_SPC_FM_EE_CR_REG & CY_FLASH_EE_EE_AWAKE))
  88   1          {
  89   2              /* Non-zero status denotes that the EEPROM/Flash is awake & powered. */
  90   2          }
  91   1      
  92   1          CyExitCriticalSection(interruptState);
  93   1      }
  94          
  95          
  96          /*******************************************************************************
  97          * Function Name: CyFlash_Stop
  98          ****************************************************************************//**
  99          *
 100          *  Disable the Flash.
 101          *
 102          * \sideeffect
 103          *  This setting is ignored as long as the CPU is currently running.  This will
 104          *  only take effect when the CPU is later disabled.
 105          *
 106          *******************************************************************************/
 107          void CyFlash_Stop(void) 
 108          {
 109   1          uint8 interruptState;
 110   1      
 111   1          interruptState = CyEnterCriticalSection();
 112   1      
 113   1          CY_FLASH_PM_ACT_CFG12_REG    &= ((uint8)(~CY_FLASH_PM_ACT_CFG12_EN_FM));
 114   1          CY_FLASH_PM_ALTACT_CFG12_REG &= ((uint8)(~CY_FLASH_PM_ALTACT_CFG12_EN_FM));
 115   1      
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 3   

 116   1          CyExitCriticalSection(interruptState);
 117   1      }
 118          
 119          
 120          /*******************************************************************************
 121          * Function Name: CySetTempInt
 122          ****************************************************************************//**
 123          *
 124          *  Sends a command to the SPC to read the die temperature. Sets a global value
 125          *  used by the Write function. This function must be called once before
 126          *  executing a series of Flash writing functions.
 127          *
 128          * \return
 129          *  status:
 130          *   CYRET_SUCCESS - if successful
 131          *   CYRET_LOCKED  - if Flash writing already in use
 132          *   CYRET_UNKNOWN - if there was an SPC error
 133          *
 134          *******************************************************************************/
 135          static cystatus CySetTempInt(void) 
 136          {
 137   1          cystatus status;
 138   1      
 139   1          /* Make sure SPC is powered */
 140   1          CySpcStart();
 141   1      
 142   1          /* Plan for failure. */
 143   1          status = CYRET_UNKNOWN;
 144   1      
 145   1          if(CySpcLock() == CYRET_SUCCESS)
 146   1          {
 147   2              /* Write the command. */
 148   2              if(CYRET_STARTED == CySpcGetTemp(CY_TEMP_NUMBER_OF_SAMPLES))
 149   2              {
 150   3                  do
 151   3                  {
 152   4                      if(CySpcReadData(dieTemperature, CY_FLASH_DIE_TEMP_DATA_SIZE) == CY_FLASH_DIE_TEMP_DATA_SI
             -ZE)
 153   4                      {
 154   5                          status = CYRET_SUCCESS;
 155   5      
 156   5                          while(CY_SPC_BUSY)
 157   5                          {
 158   6                              /* Spin until idle. */
 159   6                              CyDelayUs(1u);
 160   6                          }
 161   5                          break;
 162   5                      }
 163   4      
 164   4                  } while(CY_SPC_BUSY);
 165   3              }
 166   2      
 167   2              CySpcUnlock();
 168   2          }
 169   1          else
 170   1          {
 171   2              status = CYRET_LOCKED;
 172   2          }
 173   1      
 174   1          return (status);
 175   1      }
 176          
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 4   

 177          
 178          /*******************************************************************************
 179          * Function Name: CyFlashGetSpcAlgorithm
 180          ****************************************************************************//**
 181          *
 182          *  Sends a command to the SPC to download code into RAM.
 183          *
 184          * \return
 185          *  status:
 186          *   CYRET_SUCCESS - if successful
 187          *   CYRET_LOCKED  - if Flash writing already in use
 188          *   CYRET_UNKNOWN - if there was an SPC error
 189          *
 190          *******************************************************************************/
 191          static cystatus CyFlashGetSpcAlgorithm(void) 
 192          {
 193   1          cystatus status;
 194   1      
 195   1          /* Make sure SPC is powered */
 196   1          CySpcStart();
 197   1      
 198   1          if(CySpcLock() == CYRET_SUCCESS)
 199   1          {
 200   2              status = CySpcGetAlgorithm();
 201   2      
 202   2              if(CYRET_STARTED == status)
 203   2              {
 204   3                  while(CY_SPC_BUSY)
 205   3                  {
 206   4                      /* Spin until idle. */
 207   4                      CyDelayUs(1u);
 208   4                  }
 209   3      
 210   3                  if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 211   3                  {
 212   4                      status = CYRET_SUCCESS;
 213   4                  }
 214   3              }
 215   2              CySpcUnlock();
 216   2          }
 217   1          else
 218   1          {
 219   2              status = CYRET_LOCKED;
 220   2          }
 221   1      
 222   1          return (status);
 223   1      }
 224          
 225          
 226          /*******************************************************************************
 227          * Function Name: CySetTemp
 228          ****************************************************************************//**
 229          *
 230          *  This is a wraparound for CySetTempInt(). It is used to return the second
 231          *  successful read of the temperature value.
 232          *
 233          * \return
 234          *  status:
 235          *   CYRET_SUCCESS if successful.
 236          *   CYRET_LOCKED  if Flash writing already in use
 237          *   CYRET_UNKNOWN if there was an SPC error.
 238          *
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 5   

 239          *  uint8 dieTemperature[2]:
 240          *   Holds the die temperature for the flash writing algorithm. The first byte is
 241          *   the sign of the temperature (0 = negative, 1 = positive). The second byte is
 242          *   the magnitude.
 243          *
 244          *******************************************************************************/
 245          cystatus CySetTemp(void) 
 246          {
 247   1          cystatus status = CyFlashGetSpcAlgorithm();
 248   1      
 249   1          if(status == CYRET_SUCCESS)
 250   1          {
 251   2              status = CySetTempInt();
 252   2          }
 253   1      
 254   1          return (status);
 255   1      }
 256          
 257          
 258          /*******************************************************************************
 259          * Function Name: CySetFlashEEBuffer
 260          ****************************************************************************//**
 261          *
 262          *  Sets the user supplied temporary buffer to store SPC data while performing
 263          *  Flash and EEPROM commands. This buffer is only necessary when the Flash ECC
 264          *  is disabled.
 265          *
 266          *  \param buffer:
 267          *   The address of a block of memory to store temporary memory. The size of the
 268          *   block of memory is CYDEV_FLS_ROW_SIZE + CYDEV_ECC_ROW_SIZE.
 269          *
 270          * \return
 271          *  status:
 272          *   CYRET_SUCCESS if successful.
 273          *   CYRET_BAD_PARAM if the buffer is NULL
 274          *
 275          *******************************************************************************/
 276          cystatus CySetFlashEEBuffer(uint8 * buffer) 
 277          {
 278   1          cystatus status = CYRET_SUCCESS;
 279   1      
 280   1          CySpcStart();
 281   1      
 282   1          #if(CYDEV_ECC_ENABLE == 0)
 283   1      
 284   1              if(NULL == buffer)
 285   1              {
 286   2                  rowBuffer = rowBuffer;
 287   2                  status = CYRET_BAD_PARAM;
 288   2              }
 289   1              else if(CySpcLock() != CYRET_SUCCESS)
 290   1              {
 291   2                  rowBuffer = rowBuffer;
 292   2                  status = CYRET_LOCKED;
 293   2              }
 294   1              else
 295   1              {
 296   2                  rowBuffer = buffer;
 297   2                  CySpcUnlock();
 298   2              }
 299   1      
 300   1          #else
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 6   

              
                      /* To suppress warning */
                      buffer = buffer;
              
                  #endif  /* (CYDEV_ECC_ENABLE == 0u) */
 306   1      
 307   1          return(status);
 308   1      }
 309          
 310          
 311          /*******************************************************************************
 312          * Function Name: CyWriteRowData
 313          ****************************************************************************//**
 314          *
 315          *  Sends a command to the SPC to load and program a row of data in
 316          *  Flash or EEPROM.
 317          *
 318          *  \param arrayID:    ID of the array to write.
 319          *   The type of write, Flash or EEPROM, is determined from the array ID.
 320          *   The arrays in the part are sequential starting at the first ID for the
 321          *   specific memory type. The array ID for the Flash memory lasts from 0x00 to
 322          *   0x3F and for the EEPROM memory it lasts from 0x40 to 0x7F.
 323          *  \param rowAddress: rowAddress of flash row to program.
 324          *  \param rowData:    Array of bytes to write.
 325          *
 326          * \return
 327          *  status:
 328          *   CYRET_SUCCESS if successful.
 329          *   CYRET_LOCKED if the SPC is already in use.
 330          *   CYRET_CANCELED if command not accepted
 331          *   CYRET_UNKNOWN if there was an SPC error.
 332          *
 333          *******************************************************************************/
 334          cystatus CyWriteRowData(uint8 arrayId, uint16 rowAddress, const uint8 * rowData) 
 335          {
 336   1          uint16 rowSize;
 337   1          cystatus status;
 338   1      
 339   1          rowSize = (arrayId > CY_SPC_LAST_FLASH_ARRAYID) ? CYDEV_EEPROM_ROW_SIZE : CYDEV_FLS_ROW_SIZE;
 340   1          status = CyWriteRowFull(arrayId, rowAddress, rowData, rowSize);
 341   1      
 342   1          return(status);
 343   1      }
 344          
 345          
 346          /*******************************************************************
 347          * If "Enable Error Correcting Code (ECC)" and "Store Configuration
 348          * Data in ECC" DWR options are disabled, ECC section is available
 349          * for user data.
 350          *******************************************************************/
 351          #if ((CYDEV_ECC_ENABLE == 0u) && (CYDEV_CONFIGURATION_ECC == 0u))
              
                  /*******************************************************************************
                  * Function Name: CyWriteRowConfig
                  ****************************************************************************//**
                  *
                  *  Sends a command to the SPC to load and program a row of config data in the
                  *  Flash. This function is only valid for Flash array IDs (not for EEPROM).
                  *
                  *  \param arrayId:      ID of the array to write
                  *   The arrays in the part are sequential starting at the first ID for the
                  *   specific memory type. The array ID for the Flash memory lasts
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 7   

                  *   from 0x00 to 0x3F.
                  *  \param rowAddress:   The address of the sector to erase.
                  *  \param rowECC:       The array of bytes to write.
                  *
                  * \return
                  *  status:
                  *   CYRET_SUCCESS if successful.
                  *   CYRET_LOCKED if the SPC is already in use.
                  *   CYRET_CANCELED if command not accepted
                  *   CYRET_UNKNOWN if there was an SPC error.
                  *
                  *******************************************************************************/
                  cystatus CyWriteRowConfig(uint8 arrayId, uint16 rowAddress, const uint8 * rowECC)\
                  
                  {
                      cystatus status;
              
                      status = CyWriteRowFull(arrayId, rowAddress, rowECC, CYDEV_ECC_ROW_SIZE);
              
                      return (status);
                  }
              
              #endif  /* ((CYDEV_ECC_ENABLE == 0u) && (CYDEV_CONFIGURATION_ECC == 0u)) */
 386          
 387          
 388          
 389          /*******************************************************************************
 390          * Function Name: CyWriteRowFull
 391          ****************************************************************************//**
 392          *  Sends a command to the SPC to load and program a row of data in the Flash.
 393          *  rowData array is expected to contain Flash and ECC data if needed.
 394          *
 395          *  \param arrayId:    FLASH or EEPROM array id.
 396          *  \param rowData:    Pointer to a row of data to write.
 397          *  \param rowNumber:  Zero based number of the row.
 398          *  \param rowSize:    Size of the row.
 399          *
 400          * \return
 401          *  CYRET_SUCCESS if successful.
 402          *  CYRET_LOCKED if the SPC is already in use.
 403          *  CYRET_CANCELED if command not accepted
 404          *  CYRET_UNKNOWN if there was an SPC error.
 405          *
 406          *******************************************************************************/
 407          cystatus CyWriteRowFull(uint8 arrayId, uint16 rowNumber, const uint8* rowData, uint16 rowSize) \
 408                  
 409          {
 410   1          cystatus status = CYRET_SUCCESS;
 411   1      
 412   1          if((arrayId <=  CY_SPC_LAST_FLASH_ARRAYID) && (arrayId > (CY_FLASH_NUMBER_ARRAYS  + CY_SPC_FIRST_FLASH
             -_ARRAYID)))
 413   1          {
 414   2              status = CYRET_BAD_PARAM;
 415   2          }
 416   1      
 417   1          if(arrayId > CY_SPC_LAST_EE_ARRAYID)
 418   1          {
 419   2              status = CYRET_BAD_PARAM;
 420   2          }
 421   1      
 422   1          if((arrayId >= CY_SPC_FIRST_EE_ARRAYID) && (arrayId > (CY_FLASH_EEPROM_NUMBER_ARRAYS + CY_SPC_FIRST_EE
             -_ARRAYID)))
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 8   

 423   1          {
 424   2              status = CYRET_BAD_PARAM;
 425   2          }
 426   1      
 427   1          if(arrayId <=  CY_SPC_LAST_FLASH_ARRAYID)
 428   1          {
 429   2              /* Flash */
 430   2              if(rowNumber > (CY_FLASH_NUMBER_ROWS/CY_FLASH_NUMBER_ARRAYS))
 431   2              {
 432   3                  status = CYRET_BAD_PARAM;
 433   3              }
 434   2          }
 435   1          else
 436   1          {
 437   2              /* EEPROM */
 438   2              if(rowNumber > (CY_EEPROM_NUMBER_ROWS/CY_FLASH_EEPROM_NUMBER_ARRAYS))
 439   2              {
 440   3                  status = CYRET_BAD_PARAM;
 441   3              }
 442   2      
 443   2              if(CY_EEPROM_SIZEOF_ROW != rowSize)
 444   2              {
 445   3                  status = CYRET_BAD_PARAM;
 446   3              }
 447   2          }
 448   1      
 449   1          if(rowData == NULL)
 450   1          {
 451   2              status = CYRET_BAD_PARAM;
 452   2          }
 453   1      
 454   1      
 455   1          if(status == CYRET_SUCCESS)
 456   1          {
 457   2              if(CySpcLock() == CYRET_SUCCESS)
 458   2              {
 459   3                  /* Load row data into SPC internal latch */
 460   3                  status = CySpcLoadRowFull(arrayId, rowNumber, rowData, rowSize);
 461   3      
 462   3                  if(CYRET_STARTED == status)
 463   3                  {
 464   4                      while(CY_SPC_BUSY)
 465   4                      {
 466   5                          /* Wait for SPC to finish and get SPC status */
 467   5                          CyDelayUs(1u);
 468   5                      }
 469   4      
 470   4                      /* Hide SPC status */
 471   4                      if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 472   4                      {
 473   5                          status = CYRET_SUCCESS;
 474   5                      }
 475   4                      else
 476   4                      {
 477   5                          status = CYRET_UNKNOWN;
 478   5                      }
 479   4      
 480   4                      if(CYRET_SUCCESS == status)
 481   4                      {
 482   5                          /* Erase and program flash with data from SPC interval latch */
 483   5                          status = CySpcWriteRow(arrayId, rowNumber, dieTemperature[0u], dieTemperature[1u]);
 484   5      
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 9   

 485   5                          if(CYRET_STARTED == status)
 486   5                          {
 487   6                              while(CY_SPC_BUSY)
 488   6                              {
 489   7                                  /* Wait for SPC to finish and get SPC status */
 490   7                                  CyDelayUs(1u);
 491   7                              }
 492   6      
 493   6                              /* Hide SPC status */
 494   6                              if(CY_SPC_STATUS_SUCCESS == CY_SPC_READ_STATUS)
 495   6                              {
 496   7                                  status = CYRET_SUCCESS;
 497   7                              }
 498   6                              else
 499   6                              {
 500   7                                  status = CYRET_UNKNOWN;
 501   7                              }
 502   6                          }
 503   5                      }
 504   4                  }
 505   3                  CySpcUnlock();
 506   3              }   /* if(CySpcLock() == CYRET_SUCCESS) */
 507   2              else
 508   2              {
 509   3                  status = CYRET_LOCKED;
 510   3              }
 511   2          }
 512   1      
 513   1          return(status);
 514   1      }
 515          
 516          
 517          /*******************************************************************************
 518          * Function Name: CyFlash_SetWaitCycles
 519          ****************************************************************************//**
 520          *
 521          *  Sets the number of clock cycles the cache will wait before it samples data
 522          *  coming back from the Flash. This function must be called before increasing
 523          *  the CPU clock frequency. It can optionally be called after lowering the CPU
 524          *  clock frequency in order to improve the CPU performance.
 525          *
 526          *  \param uint8 freq:
 527          *   Frequency of operation in Megahertz.
 528          *
 529          *******************************************************************************/
 530          void CyFlash_SetWaitCycles(uint8 freq) 
 531          {
 532   1          uint8 interruptState;
 533   1      
 534   1          /* Save current global interrupt enable and disable it */
 535   1          interruptState = CyEnterCriticalSection();
 536   1      
 537   1          /***************************************************************************
 538   1          * The number of clock cycles the cache will wait before it samples data
 539   1          * coming back from the Flash must be equal or greater to to the CPU frequency
 540   1          * outlined in clock cycles.
 541   1          ***************************************************************************/
 542   1      
 543   1          if (freq < CY_FLASH_CACHE_WS_1_FREQ_MAX)
 544   1          {
 545   2              CY_FLASH_CONTROL_REG = (CY_FLASH_CONTROL_REG & (uint8)(~CY_FLASH_CACHE_WS_VALUE_MASK)) |
 546   2                                          CY_FLASH_CACHE_WS_1_VALUE_MASK;
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 10  

 547   2          }
 548   1          else if (freq < CY_FLASH_CACHE_WS_2_FREQ_MAX)
 549   1          {
 550   2              CY_FLASH_CONTROL_REG = (CY_FLASH_CONTROL_REG & (uint8)(~CY_FLASH_CACHE_WS_VALUE_MASK)) |
 551   2                                          CY_FLASH_CACHE_WS_2_VALUE_MASK;
 552   2          }
 553   1          else if (freq < CY_FLASH_CACHE_WS_3_FREQ_MAX)
 554   1          {
 555   2              CY_FLASH_CONTROL_REG = (CY_FLASH_CONTROL_REG & (uint8)(~CY_FLASH_CACHE_WS_VALUE_MASK)) |
 556   2                                          CY_FLASH_CACHE_WS_3_VALUE_MASK;
 557   2          }
 558   1      #if (CY_PSOC5)
                  else if (freq < CY_FLASH_CACHE_WS_4_FREQ_MAX)
                  {
                      CY_FLASH_CONTROL_REG = (CY_FLASH_CONTROL_REG & (uint8)(~CY_FLASH_CACHE_WS_VALUE_MASK)) |
                                                  CY_FLASH_CACHE_WS_4_VALUE_MASK;
                  }
                  else if (freq <= CY_FLASH_CACHE_WS_5_FREQ_MAX)
                  {
                      CY_FLASH_CONTROL_REG = (CY_FLASH_CONTROL_REG & (uint8)(~CY_FLASH_CACHE_WS_VALUE_MASK)) |
                                                  CY_FLASH_CACHE_WS_5_VALUE_MASK;
                  }
              #endif  /* (CY_PSOC5) */
 570   1          else
 571   1          {
 572   2              /* Halt CPU in debug mode if frequency is invalid */
 573   2              CYASSERT(0u != 0u);
 574   2          }
 575   1      
 576   1          /* Restore global interrupt enable state */
 577   1          CyExitCriticalSection(interruptState);
 578   1      }
 579          
 580          
 581          /*******************************************************************************
 582          * Function Name: CyEEPROM_Start
 583          ****************************************************************************//**
 584          *
 585          *  Enable the EEPROM.
 586          *
 587          *******************************************************************************/
 588          void CyEEPROM_Start(void) 
 589          {
 590   1          uint8 interruptState;
 591   1      
 592   1          interruptState = CyEnterCriticalSection();
 593   1      
 594   1      
 595   1          /***************************************************************************
 596   1          * Enable SPC clock. This also internally enables the 36MHz IMO, since this
 597   1          * is required for the SPC to function.
 598   1          ***************************************************************************/
 599   1          CY_FLASH_PM_ACT_CFG0_REG    |= CY_FLASH_PM_ACT_CFG0_EN_CLK_SPC;
 600   1          CY_FLASH_PM_ALTACT_CFG0_REG |= CY_FLASH_PM_ALTACT_CFG0_EN_CLK_SPC;
 601   1      
 602   1      
 603   1          /***************************************************************************
 604   1          * The wake count defines the number of Bus Clock cycles it takes for the
 605   1          * flash or EEPROM to wake up from a low power mode independent of the chip
 606   1          * power mode. Wake up time for these blocks is 5 us.
 607   1          * The granularity of this register is 2 Bus Clock cycles, so a value of 0x1E
 608   1          * (30d) defines the wake up time as 60 cycles of the Bus Clock.
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 11  

 609   1          * This register needs to be written with a value dependent on the Bus Clock
 610   1          * frequency so that the duration of the cycles is equal to or greater than
 611   1          * the 5 us delay required.
 612   1          ***************************************************************************/
 613   1          CY_FLASH_SPC_FM_EE_WAKE_CNT_REG = CY_FLASH_SPC_FM_EE_WAKE_CNT_80MHZ;
 614   1      
 615   1      
 616   1          /***************************************************************************
 617   1          * Enable EEPROM. Re-enabling an EEPROM macro takes 5us. During this time,
 618   1          * the EE will not acknowledge a PHUB request.
 619   1          ***************************************************************************/
 620   1          CY_FLASH_PM_ACT_CFG12_REG    |= CY_FLASH_PM_ACT_CFG12_EN_EE;
 621   1          CY_FLASH_PM_ALTACT_CFG12_REG |= CY_FLASH_PM_ALTACT_CFG12_EN_EE;
 622   1      
 623   1          while(0u == (CY_FLASH_SPC_FM_EE_CR_REG & CY_FLASH_EE_EE_AWAKE))
 624   1          {
 625   2              /* Non-zero status denotes that the EEPROM/Flash is awake & powered. */
 626   2          }
 627   1      
 628   1          CyExitCriticalSection(interruptState);
 629   1      }
 630          
 631          
 632          /*******************************************************************************
 633          * Function Name: CyEEPROM_Stop
 634          ****************************************************************************//**
 635          *
 636          *  Disable the EEPROM.
 637          *
 638          *******************************************************************************/
 639          void CyEEPROM_Stop (void) 
 640          {
 641   1          uint8 interruptState;
 642   1      
 643   1          interruptState = CyEnterCriticalSection();
 644   1      
 645   1          CY_FLASH_PM_ACT_CFG12_REG    &= ((uint8)(~CY_FLASH_PM_ACT_CFG12_EN_EE));
 646   1          CY_FLASH_PM_ALTACT_CFG12_REG &= ((uint8)(~CY_FLASH_PM_ALTACT_CFG12_EN_EE));
 647   1      
 648   1          CyExitCriticalSection(interruptState);
 649   1      }
 650          
 651          
 652          /*******************************************************************************
 653          * Function Name: CyEEPROM_ReadReserve
 654          ****************************************************************************//**
 655          *
 656          *  Request access to the EEPROM for reading and wait until access is available.
 657          *
 658          *******************************************************************************/
 659          void CyEEPROM_ReadReserve(void) 
 660          {
 661   1          /* Make request for PHUB to have access */
 662   1          CY_FLASH_EE_SCR_REG |= CY_FLASH_EE_SCR_AHB_EE_REQ;
 663   1      
 664   1          while (0u == (CY_FLASH_EE_SCR_REG & CY_FLASH_EE_SCR_AHB_EE_ACK))
 665   1          {
 666   2              /* Wait for acknowledgment from PHUB */
 667   2          }
 668   1      }
 669          
 670          
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 12  

 671          /*******************************************************************************
 672          * Function Name: CyEEPROM_ReadRelease
 673          ****************************************************************************//**
 674          *
 675          *  Release the read reservation of the EEPROM.
 676          *
 677          *******************************************************************************/
 678          void CyEEPROM_ReadRelease(void) 
 679          {
 680   1          CY_FLASH_EE_SCR_REG &= (uint8)(~CY_FLASH_EE_SCR_AHB_EE_REQ);
 681   1      }
 682          
 683          
 684          /* [] END OF FILE */
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 13  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION CyFlash_Start (BEGIN)
                                           ; SOURCE LINE # 49
                                           ; SOURCE LINE # 50
                                           ; SOURCE LINE # 53
0000 120000      E     LCALL   CyEnterCriticalSection
0003 900000      R     MOV     DPTR,#interruptState
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 60
0008 9043A0            MOV     DPTR,#043A0H
000B E0                MOVX    A,@DPTR
000C FF                MOV     R7,A
000D EF                MOV     A,R7
000E 4408              ORL     A,#08H
0010 FF                MOV     R7,A
0011 EF                MOV     A,R7
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 61
0013 9043B0            MOV     DPTR,#043B0H
0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 4408              ORL     A,#08H
001B FF                MOV     R7,A
001C EF                MOV     A,R7
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 74
001E 904701            MOV     DPTR,#04701H
0021 74C8              MOV     A,#0C8H
0023 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 84
0024 9043AC            MOV     DPTR,#043ACH
0027 E0                MOVX    A,@DPTR
0028 FF                MOV     R7,A
0029 EF                MOV     A,R7
002A 4401              ORL     A,#01H
002C FF                MOV     R7,A
002D EF                MOV     A,R7
002E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 85
002F 9043BC            MOV     DPTR,#043BCH
0032 E0                MOVX    A,@DPTR
0033 FF                MOV     R7,A
0034 EF                MOV     A,R7
0035 4401              ORL     A,#01H
0037 FF                MOV     R7,A
0038 EF                MOV     A,R7
0039 F0                MOVX    @DPTR,A
003A         ?C0001:
                                           ; SOURCE LINE # 87
003A 904700            MOV     DPTR,#04700H
003D E0                MOVX    A,@DPTR
003E FF                MOV     R7,A
003F EF                MOV     A,R7
0040 5420              ANL     A,#020H
0042 FF                MOV     R7,A
0043 7E00              MOV     R6,#00H
0045 EF                MOV     A,R7
0046 4E                ORL     A,R6
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 14  

0047 60F1              JZ      ?C0001
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 90
0049         ?C0002:
                                           ; SOURCE LINE # 92
0049 900000      R     MOV     DPTR,#interruptState
004C E0                MOVX    A,@DPTR
004D FF                MOV     R7,A
004E 120000      E     LCALL   _CyExitCriticalSection
                                           ; SOURCE LINE # 93
0051 22                RET     
             ; FUNCTION CyFlash_Start (END)

             ; FUNCTION CyFlash_Stop (BEGIN)
                                           ; SOURCE LINE # 107
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 111
0000 120000      E     LCALL   CyEnterCriticalSection
0003 900000      R     MOV     DPTR,#interruptState
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 113
0008 9043AC            MOV     DPTR,#043ACH
000B E0                MOVX    A,@DPTR
000C FF                MOV     R7,A
000D EF                MOV     A,R7
000E 54FE              ANL     A,#0FEH
0010 FF                MOV     R7,A
0011 EF                MOV     A,R7
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 114
0013 9043BC            MOV     DPTR,#043BCH
0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 54FE              ANL     A,#0FEH
001B FF                MOV     R7,A
001C EF                MOV     A,R7
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 116
001E 900000      R     MOV     DPTR,#interruptState
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 120000      E     LCALL   _CyExitCriticalSection
                                           ; SOURCE LINE # 117
0026 22                RET     
             ; FUNCTION CyFlash_Stop (END)

             ; FUNCTION CySetTempInt (BEGIN)
                                           ; SOURCE LINE # 135
                                           ; SOURCE LINE # 136
                                           ; SOURCE LINE # 140
0000 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 143
0003 900000      R     MOV     DPTR,#status
0006 74FF              MOV     A,#0FFH
0008 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 145
0009 120000      E     LCALL   CySpcLock
000C EF                MOV     A,R7
000D 704A              JNZ     ?C0005
                                           ; SOURCE LINE # 146
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 15  

                                           ; SOURCE LINE # 148
000F 7F01              MOV     R7,#01H
0011 120000      E     LCALL   _CySpcGetTemp
0014 EF                MOV     A,R7
0015 6407              XRL     A,#07H
0017 703B              JNZ     ?C0006
                                           ; SOURCE LINE # 149
0019         ?C0009:
                                           ; SOURCE LINE # 151
                                           ; SOURCE LINE # 152
0019 7B01              MOV     R3,#01H
001B 7A00        R     MOV     R2,#HIGH dieTemperature
001D 7900        R     MOV     R1,#LOW dieTemperature
001F 7D02              MOV     R5,#02H
0021 120000      E     LCALL   _CySpcReadData
0024 EF                MOV     A,R7
0025 B4021D            CJNE    A,#02H,?C0007
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 154
0028 900000      R     MOV     DPTR,#status
002B E4                CLR     A
002C F0                MOVX    @DPTR,A
002D         ?C0011:
                                           ; SOURCE LINE # 156
002D 904722            MOV     DPTR,#04722H
0030 E0                MOVX    A,@DPTR
0031 FF                MOV     R7,A
0032 EF                MOV     A,R7
0033 5402              ANL     A,#02H
0035 FF                MOV     R7,A
0036 7E00              MOV     R6,#00H
0038 EF                MOV     A,R7
0039 4E                ORL     A,R6
003A 7018              JNZ     ?C0006
                                           ; SOURCE LINE # 157
                                           ; SOURCE LINE # 159
003C 7F01              MOV     R7,#01H
003E 7E00              MOV     R6,#00H
0040 120000      E     LCALL   _CyDelayUs
                                           ; SOURCE LINE # 160
0043 80E8              SJMP    ?C0011
                                           ; SOURCE LINE # 161
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 164
0045         ?C0007:
0045 904722            MOV     DPTR,#04722H
0048 E0                MOVX    A,@DPTR
0049 FF                MOV     R7,A
004A EF                MOV     A,R7
004B 5402              ANL     A,#02H
004D FF                MOV     R7,A
004E 7E00              MOV     R6,#00H
0050 EF                MOV     A,R7
0051 4E                ORL     A,R6
0052 60C5              JZ      ?C0009
                                           ; SOURCE LINE # 165
0054         ?C0006:
                                           ; SOURCE LINE # 167
0054 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 168
0057 8006              SJMP    ?C0013
0059         ?C0005:
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 16  

                                           ; SOURCE LINE # 170
                                           ; SOURCE LINE # 171
0059 900000      R     MOV     DPTR,#status
005C 7404              MOV     A,#04H
005E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 172
005F         ?C0013:
                                           ; SOURCE LINE # 174
005F 900000      R     MOV     DPTR,#status
0062 E0                MOVX    A,@DPTR
0063 FF                MOV     R7,A
                                           ; SOURCE LINE # 175
0064         ?C0014:
0064 22                RET     
             ; FUNCTION CySetTempInt (END)

             ; FUNCTION CyFlashGetSpcAlgorithm (BEGIN)
                                           ; SOURCE LINE # 191
                                           ; SOURCE LINE # 192
                                           ; SOURCE LINE # 196
0000 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 198
0003 120000      E     LCALL   CySpcLock
0006 EF                MOV     A,R7
0007 7055              JNZ     ?C0015
                                           ; SOURCE LINE # 199
                                           ; SOURCE LINE # 200
0009 120000      E     LCALL   CySpcGetAlgorithm
000C 900000      R     MOV     DPTR,#status
000F EF                MOV     A,R7
0010 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 202
0011 900000      R     MOV     DPTR,#status
0014 E0                MOVX    A,@DPTR
0015 FF                MOV     R7,A
0016 EF                MOV     A,R7
0017 6407              XRL     A,#07H
0019 703E              JNZ     ?C0016
                                           ; SOURCE LINE # 203
001B         ?C0017:
                                           ; SOURCE LINE # 204
001B 904722            MOV     DPTR,#04722H
001E E0                MOVX    A,@DPTR
001F FF                MOV     R7,A
0020 EF                MOV     A,R7
0021 5402              ANL     A,#02H
0023 FF                MOV     R7,A
0024 7E00              MOV     R6,#00H
0026 EF                MOV     A,R7
0027 4E                ORL     A,R6
0028 7009              JNZ     ?C0018
                                           ; SOURCE LINE # 205
                                           ; SOURCE LINE # 207
002A 7F01              MOV     R7,#01H
002C 7E00              MOV     R6,#00H
002E 120000      E     LCALL   _CyDelayUs
                                           ; SOURCE LINE # 208
0031 80E8              SJMP    ?C0017
0033         ?C0018:
                                           ; SOURCE LINE # 210
0033 904722            MOV     DPTR,#04722H
0036 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 17  

0037 FF                MOV     R7,A
0038 EF                MOV     A,R7
0039 5402              ANL     A,#02H
003B FF                MOV     R7,A
003C 7E00              MOV     R6,#00H
003E EF                MOV     A,R7
003F 4E                ORL     A,R6
0040 600D              JZ      ?C0020
0042 904722            MOV     DPTR,#04722H
0045 E0                MOVX    A,@DPTR
0046 FF                MOV     R7,A
0047 EF                MOV     A,R7
0048 13                RRC     A
0049 13                RRC     A
004A 543F              ANL     A,#03FH
004C FF                MOV     R7,A
004D 8002              SJMP    ?C0021
004F         ?C0020:
004F 7FFF              MOV     R7,#0FFH
0051         ?C0021:
0051 EF                MOV     A,R7
0052 7005              JNZ     ?C0016
                                           ; SOURCE LINE # 211
                                           ; SOURCE LINE # 212
0054 900000      R     MOV     DPTR,#status
0057 E4                CLR     A
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 213
                                           ; SOURCE LINE # 214
0059         ?C0016:
                                           ; SOURCE LINE # 215
0059 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 216
005C 8006              SJMP    ?C0022
005E         ?C0015:
                                           ; SOURCE LINE # 218
                                           ; SOURCE LINE # 219
005E 900000      R     MOV     DPTR,#status
0061 7404              MOV     A,#04H
0063 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 220
0064         ?C0022:
                                           ; SOURCE LINE # 222
0064 900000      R     MOV     DPTR,#status
0067 E0                MOVX    A,@DPTR
0068 FF                MOV     R7,A
                                           ; SOURCE LINE # 223
0069         ?C0023:
0069 22                RET     
             ; FUNCTION CyFlashGetSpcAlgorithm (END)

             ; FUNCTION CySetTemp (BEGIN)
                                           ; SOURCE LINE # 245
                                           ; SOURCE LINE # 246
                                           ; SOURCE LINE # 247
0000 120000      R     LCALL   CyFlashGetSpcAlgorithm
0003 900000      R     MOV     DPTR,#status
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 249
0008 900000      R     MOV     DPTR,#status
000B E0                MOVX    A,@DPTR
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 18  

000C FF                MOV     R7,A
000D EF                MOV     A,R7
000E 7008              JNZ     ?C0024
                                           ; SOURCE LINE # 250
                                           ; SOURCE LINE # 251
0010 120000      R     LCALL   CySetTempInt
0013 900000      R     MOV     DPTR,#status
0016 EF                MOV     A,R7
0017 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 252
0018         ?C0024:
                                           ; SOURCE LINE # 254
0018 900000      R     MOV     DPTR,#status
001B E0                MOVX    A,@DPTR
001C FF                MOV     R7,A
                                           ; SOURCE LINE # 255
001D         ?C0025:
001D 22                RET     
             ; FUNCTION CySetTemp (END)

             ; FUNCTION _CySetFlashEEBuffer (BEGIN)
                                           ; SOURCE LINE # 276
0000 900000      R     MOV     DPTR,#buffer
0003 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 277
                                           ; SOURCE LINE # 278
0006 900000      R     MOV     DPTR,#status
0009 E4                CLR     A
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 280
000B 120000      E     LCALL   CySpcStart
                                           ; SOURCE LINE # 284
000E 7B00              MOV     R3,#00H
0010 7A00              MOV     R2,#00H
0012 7900              MOV     R1,#00H
0014 C003              PUSH    AR3
0016 C002              PUSH    AR2
0018 C001              PUSH    AR1
001A 900000      R     MOV     DPTR,#buffer
001D 120000      E     LCALL   ?C?PLDXDATA
0020 D082              POP     DPL
0022 D083              POP     DPH
0024 D0E0              POP     ACC
0026 6B                XRL     A,R3
0027 7008              JNZ     ?C0078
0029 E9                MOV     A,R1
002A 6582              XRL     A,DPL
002C 7003              JNZ     ?C0078
002E EA                MOV     A,R2
002F 6583              XRL     A,DPH
0031         ?C0078:
0031 7014              JNZ     ?C0026
                                           ; SOURCE LINE # 285
                                           ; SOURCE LINE # 286
0033 900000      R     MOV     DPTR,#rowBuffer
0036 120000      E     LCALL   ?C?PLDXDATA
0039 900000      R     MOV     DPTR,#rowBuffer
003C 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 287
003F 900000      R     MOV     DPTR,#status
0042 7401              MOV     A,#01H
0044 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 19  

                                           ; SOURCE LINE # 288
0045 8029              SJMP    ?C0027
0047         ?C0026:
                                           ; SOURCE LINE # 289
0047 120000      E     LCALL   CySpcLock
004A EF                MOV     A,R7
004B 6014              JZ      ?C0028
                                           ; SOURCE LINE # 290
                                           ; SOURCE LINE # 291
004D 900000      R     MOV     DPTR,#rowBuffer
0050 120000      E     LCALL   ?C?PLDXDATA
0053 900000      R     MOV     DPTR,#rowBuffer
0056 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 292
0059 900000      R     MOV     DPTR,#status
005C 7404              MOV     A,#04H
005E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 293
005F 800F              SJMP    ?C0027
0061         ?C0028:
                                           ; SOURCE LINE # 295
                                           ; SOURCE LINE # 296
0061 900000      R     MOV     DPTR,#buffer
0064 120000      E     LCALL   ?C?PLDXDATA
0067 900000      R     MOV     DPTR,#rowBuffer
006A 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 297
006D 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 298
0070         ?C0027:
                                           ; SOURCE LINE # 307
0070 900000      R     MOV     DPTR,#status
0073 E0                MOVX    A,@DPTR
0074 FF                MOV     R7,A
                                           ; SOURCE LINE # 308
0075         ?C0030:
0075 22                RET     
             ; FUNCTION _CySetFlashEEBuffer (END)

             ; FUNCTION _CyWriteRowData (BEGIN)
                                           ; SOURCE LINE # 334
0000 900000      R     MOV     DPTR,#arrayId
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#rowAddress
0008 EC                MOV     A,R4
0009 F0                MOVX    @DPTR,A
000A A3                INC     DPTR
000B ED                MOV     A,R5
000C F0                MOVX    @DPTR,A
000D 900000      R     MOV     DPTR,#rowData
0010 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 335
                                           ; SOURCE LINE # 339
0013 900000      R     MOV     DPTR,#arrayId
0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 D3                SETB    C
001A 943F              SUBB    A,#03FH
001C 4006              JC      ?C0031
001E 7E00              MOV     R6,#00H
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 20  

0020 7F10              MOV     R7,#010H
0022 8004              SJMP    ?C0032
0024         ?C0031:
0024 7E01              MOV     R6,#01H
0026 7F00              MOV     R7,#00H
0028         ?C0032:
0028 900000      R     MOV     DPTR,#rowSize
002B EE                MOV     A,R6
002C F0                MOVX    @DPTR,A
002D A3                INC     DPTR
002E EF                MOV     A,R7
002F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 340
0030 900000      R     MOV     DPTR,#arrayId
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 C007              PUSH    AR7
0037 900000      R     MOV     DPTR,#rowAddress
003A E0                MOVX    A,@DPTR
003B FC                MOV     R4,A
003C A3                INC     DPTR
003D E0                MOVX    A,@DPTR
003E FD                MOV     R5,A
003F 900000      R     MOV     DPTR,#rowData
0042 120000      E     LCALL   ?C?PLDXDATA
0045 900000      R     MOV     DPTR,#rowSize
0048 E0                MOVX    A,@DPTR
0049 FE                MOV     R6,A
004A A3                INC     DPTR
004B E0                MOVX    A,@DPTR
004C FF                MOV     R7,A
004D 900000      R     MOV     DPTR,#?_CyWriteRowFull?BYTE+06H
0050 EE                MOV     A,R6
0051 F0                MOVX    @DPTR,A
0052 A3                INC     DPTR
0053 EF                MOV     A,R7
0054 F0                MOVX    @DPTR,A
0055 D007              POP     AR7
0057 120000      R     LCALL   _CyWriteRowFull
005A 900000      R     MOV     DPTR,#status
005D EF                MOV     A,R7
005E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 342
005F 900000      R     MOV     DPTR,#status
0062 E0                MOVX    A,@DPTR
0063 FF                MOV     R7,A
                                           ; SOURCE LINE # 343
0064         ?C0033:
0064 22                RET     
             ; FUNCTION _CyWriteRowData (END)

             ; FUNCTION _CyWriteRowFull (BEGIN)
                                           ; SOURCE LINE # 407
0000 900000      R     MOV     DPTR,#arrayId
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#rowNumber
0008 EC                MOV     A,R4
0009 F0                MOVX    @DPTR,A
000A A3                INC     DPTR
000B ED                MOV     A,R5
000C F0                MOVX    @DPTR,A
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 21  

000D 900000      R     MOV     DPTR,#rowData
0010 120000      E     LCALL   ?C?PSTXDATA
                                           ; SOURCE LINE # 409
                                           ; SOURCE LINE # 410
0013 900000      R     MOV     DPTR,#status
0016 E4                CLR     A
0017 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 412
0018 900000      R     MOV     DPTR,#arrayId
001B E0                MOVX    A,@DPTR
001C FF                MOV     R7,A
001D EF                MOV     A,R7
001E D3                SETB    C
001F 943F              SUBB    A,#03FH
0021 5011              JNC     ?C0034
0023 900000      R     MOV     DPTR,#arrayId
0026 E0                MOVX    A,@DPTR
0027 FF                MOV     R7,A
0028 EF                MOV     A,R7
0029 D3                SETB    C
002A 9401              SUBB    A,#01H
002C 4006              JC      ?C0034
                                           ; SOURCE LINE # 413
                                           ; SOURCE LINE # 414
002E 900000      R     MOV     DPTR,#status
0031 7401              MOV     A,#01H
0033 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 415
0034         ?C0034:
                                           ; SOURCE LINE # 417
0034 900000      R     MOV     DPTR,#arrayId
0037 E0                MOVX    A,@DPTR
0038 FF                MOV     R7,A
0039 EF                MOV     A,R7
003A D3                SETB    C
003B 947F              SUBB    A,#07FH
003D 4006              JC      ?C0035
                                           ; SOURCE LINE # 418
                                           ; SOURCE LINE # 419
003F 900000      R     MOV     DPTR,#status
0042 7401              MOV     A,#01H
0044 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 420
0045         ?C0035:
                                           ; SOURCE LINE # 422
0045 900000      R     MOV     DPTR,#arrayId
0048 E0                MOVX    A,@DPTR
0049 FF                MOV     R7,A
004A EF                MOV     A,R7
004B C3                CLR     C
004C 9440              SUBB    A,#040H
004E 4011              JC      ?C0036
0050 900000      R     MOV     DPTR,#arrayId
0053 E0                MOVX    A,@DPTR
0054 FF                MOV     R7,A
0055 EF                MOV     A,R7
0056 D3                SETB    C
0057 9441              SUBB    A,#041H
0059 4006              JC      ?C0036
                                           ; SOURCE LINE # 423
                                           ; SOURCE LINE # 424
005B 900000      R     MOV     DPTR,#status
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 22  

005E 7401              MOV     A,#01H
0060 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 425
0061         ?C0036:
                                           ; SOURCE LINE # 427
0061 900000      R     MOV     DPTR,#arrayId
0064 E0                MOVX    A,@DPTR
0065 FF                MOV     R7,A
0066 EF                MOV     A,R7
0067 D3                SETB    C
0068 943F              SUBB    A,#03FH
006A 5021              JNC     ?C0037
                                           ; SOURCE LINE # 428
                                           ; SOURCE LINE # 430
006C 900000      R     MOV     DPTR,#rowNumber
006F E0                MOVX    A,@DPTR
0070 FE                MOV     R6,A
0071 A3                INC     DPTR
0072 E0                MOVX    A,@DPTR
0073 FF                MOV     R7,A
0074 E4                CLR     A
0075 FC                MOV     R4,A
0076 FD                MOV     R5,A
0077 7B00              MOV     R3,#00H
0079 7A01              MOV     R2,#01H
007B 7900              MOV     R1,#00H
007D 7800              MOV     R0,#00H
007F C3                CLR     C
0080 120000      E     LCALL   ?C?ULCMP
0083 5033              JNC     ?C0039
                                           ; SOURCE LINE # 431
                                           ; SOURCE LINE # 432
0085 900000      R     MOV     DPTR,#status
0088 7401              MOV     A,#01H
008A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 433
                                           ; SOURCE LINE # 434
008B 802B              SJMP    ?C0039
008D         ?C0037:
                                           ; SOURCE LINE # 436
                                           ; SOURCE LINE # 438
008D 900000      R     MOV     DPTR,#rowNumber
0090 E0                MOVX    A,@DPTR
0091 FE                MOV     R6,A
0092 A3                INC     DPTR
0093 E0                MOVX    A,@DPTR
0094 FF                MOV     R7,A
0095 D3                SETB    C
0096 EF                MOV     A,R7
0097 9480              SUBB    A,#080H
0099 EE                MOV     A,R6
009A 9400              SUBB    A,#00H
009C 4006              JC      ?C0040
                                           ; SOURCE LINE # 439
                                           ; SOURCE LINE # 440
009E 900000      R     MOV     DPTR,#status
00A1 7401              MOV     A,#01H
00A3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 441
00A4         ?C0040:
                                           ; SOURCE LINE # 443
00A4 900000      R     MOV     DPTR,#rowSize
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 23  

00A7 E0                MOVX    A,@DPTR
00A8 FE                MOV     R6,A
00A9 A3                INC     DPTR
00AA E0                MOVX    A,@DPTR
00AB FF                MOV     R7,A
00AC EF                MOV     A,R7
00AD 6410              XRL     A,#010H
00AF 4E                ORL     A,R6
00B0 6006              JZ      ?C0039
                                           ; SOURCE LINE # 444
                                           ; SOURCE LINE # 445
00B2 900000      R     MOV     DPTR,#status
00B5 7401              MOV     A,#01H
00B7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 446
                                           ; SOURCE LINE # 447
00B8         ?C0039:
                                           ; SOURCE LINE # 449
00B8 7B00              MOV     R3,#00H
00BA 7A00              MOV     R2,#00H
00BC 7900              MOV     R1,#00H
00BE C003              PUSH    AR3
00C0 C002              PUSH    AR2
00C2 C001              PUSH    AR1
00C4 900000      R     MOV     DPTR,#rowData
00C7 120000      E     LCALL   ?C?PLDXDATA
00CA D082              POP     DPL
00CC D083              POP     DPH
00CE D0E0              POP     ACC
00D0 6B                XRL     A,R3
00D1 7008              JNZ     ?C0079
00D3 E9                MOV     A,R1
00D4 6582              XRL     A,DPL
00D6 7003              JNZ     ?C0079
00D8 EA                MOV     A,R2
00D9 6583              XRL     A,DPH
00DB         ?C0079:
00DB 7006              JNZ     ?C0042
                                           ; SOURCE LINE # 450
                                           ; SOURCE LINE # 451
00DD 900000      R     MOV     DPTR,#status
00E0 7401              MOV     A,#01H
00E2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 452
00E3         ?C0042:
                                           ; SOURCE LINE # 455
00E3 900000      R     MOV     DPTR,#status
00E6 E0                MOVX    A,@DPTR
00E7 FF                MOV     R7,A
00E8 EF                MOV     A,R7
00E9 6003              JZ      $ + 5H
00EB 020000      R     LJMP    ?C0043
                                           ; SOURCE LINE # 456
                                           ; SOURCE LINE # 457
00EE 120000      E     LCALL   CySpcLock
00F1 EF                MOV     A,R7
00F2 6003              JZ      $ + 5H
00F4 020000      R     LJMP    ?C0044
                                           ; SOURCE LINE # 458
                                           ; SOURCE LINE # 460
00F7 900000      R     MOV     DPTR,#arrayId
00FA E0                MOVX    A,@DPTR
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 24  

00FB FF                MOV     R7,A
00FC C007              PUSH    AR7
00FE 900000      R     MOV     DPTR,#rowNumber
0101 E0                MOVX    A,@DPTR
0102 FC                MOV     R4,A
0103 A3                INC     DPTR
0104 E0                MOVX    A,@DPTR
0105 FD                MOV     R5,A
0106 900000      R     MOV     DPTR,#rowData
0109 120000      E     LCALL   ?C?PLDXDATA
010C 900000      R     MOV     DPTR,#rowSize
010F E0                MOVX    A,@DPTR
0110 FE                MOV     R6,A
0111 A3                INC     DPTR
0112 E0                MOVX    A,@DPTR
0113 FF                MOV     R7,A
0114 900000      E     MOV     DPTR,#?_CySpcLoadRowFull?BYTE+06H
0117 EE                MOV     A,R6
0118 F0                MOVX    @DPTR,A
0119 A3                INC     DPTR
011A EF                MOV     A,R7
011B F0                MOVX    @DPTR,A
011C D007              POP     AR7
011E 120000      E     LCALL   _CySpcLoadRowFull
0121 900000      R     MOV     DPTR,#status
0124 EF                MOV     A,R7
0125 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 462
0126 900000      R     MOV     DPTR,#status
0129 E0                MOVX    A,@DPTR
012A FF                MOV     R7,A
012B EF                MOV     A,R7
012C 6407              XRL     A,#07H
012E 6003              JZ      $ + 5H
0130 020000      R     LJMP    ?C0045
                                           ; SOURCE LINE # 463
0133         ?C0046:
                                           ; SOURCE LINE # 464
0133 904722            MOV     DPTR,#04722H
0136 E0                MOVX    A,@DPTR
0137 FF                MOV     R7,A
0138 EF                MOV     A,R7
0139 5402              ANL     A,#02H
013B FF                MOV     R7,A
013C 7E00              MOV     R6,#00H
013E EF                MOV     A,R7
013F 4E                ORL     A,R6
0140 7009              JNZ     ?C0047
                                           ; SOURCE LINE # 465
                                           ; SOURCE LINE # 467
0142 7F01              MOV     R7,#01H
0144 7E00              MOV     R6,#00H
0146 120000      E     LCALL   _CyDelayUs
                                           ; SOURCE LINE # 468
0149 80E8              SJMP    ?C0046
014B         ?C0047:
                                           ; SOURCE LINE # 471
014B 904722            MOV     DPTR,#04722H
014E E0                MOVX    A,@DPTR
014F FF                MOV     R7,A
0150 EF                MOV     A,R7
0151 5402              ANL     A,#02H
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 25  

0153 FF                MOV     R7,A
0154 7E00              MOV     R6,#00H
0156 EF                MOV     A,R7
0157 4E                ORL     A,R6
0158 600D              JZ      ?C0049
015A 904722            MOV     DPTR,#04722H
015D E0                MOVX    A,@DPTR
015E FF                MOV     R7,A
015F EF                MOV     A,R7
0160 13                RRC     A
0161 13                RRC     A
0162 543F              ANL     A,#03FH
0164 FF                MOV     R7,A
0165 8002              SJMP    ?C0050
0167         ?C0049:
0167 7FFF              MOV     R7,#0FFH
0169         ?C0050:
0169 EF                MOV     A,R7
016A 7007              JNZ     ?C0048
                                           ; SOURCE LINE # 472
                                           ; SOURCE LINE # 473
016C 900000      R     MOV     DPTR,#status
016F E4                CLR     A
0170 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 474
0171 8006              SJMP    ?C0051
0173         ?C0048:
                                           ; SOURCE LINE # 476
                                           ; SOURCE LINE # 477
0173 900000      R     MOV     DPTR,#status
0176 74FF              MOV     A,#0FFH
0178 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 478
0179         ?C0051:
                                           ; SOURCE LINE # 480
0179 900000      R     MOV     DPTR,#status
017C E0                MOVX    A,@DPTR
017D FF                MOV     R7,A
017E EF                MOV     A,R7
017F 7074              JNZ     ?C0045
                                           ; SOURCE LINE # 481
                                           ; SOURCE LINE # 483
0181 900000      R     MOV     DPTR,#arrayId
0184 E0                MOVX    A,@DPTR
0185 FF                MOV     R7,A
0186 900000      R     MOV     DPTR,#rowNumber
0189 E0                MOVX    A,@DPTR
018A FC                MOV     R4,A
018B A3                INC     DPTR
018C E0                MOVX    A,@DPTR
018D FD                MOV     R5,A
018E 900000      R     MOV     DPTR,#dieTemperature
0191 E0                MOVX    A,@DPTR
0192 FB                MOV     R3,A
0193 900000      R     MOV     DPTR,#dieTemperature+01H
0196 E0                MOVX    A,@DPTR
0197 FE                MOV     R6,A
0198 900000      E     MOV     DPTR,#?_CySpcWriteRow?BYTE+04H
019B EE                MOV     A,R6
019C F0                MOVX    @DPTR,A
019D 120000      E     LCALL   _CySpcWriteRow
01A0 900000      R     MOV     DPTR,#status
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 26  

01A3 EF                MOV     A,R7
01A4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 485
01A5 900000      R     MOV     DPTR,#status
01A8 E0                MOVX    A,@DPTR
01A9 FF                MOV     R7,A
01AA EF                MOV     A,R7
01AB 6407              XRL     A,#07H
01AD 7046              JNZ     ?C0045
                                           ; SOURCE LINE # 486
01AF         ?C0054:
                                           ; SOURCE LINE # 487
01AF 904722            MOV     DPTR,#04722H
01B2 E0                MOVX    A,@DPTR
01B3 FF                MOV     R7,A
01B4 EF                MOV     A,R7
01B5 5402              ANL     A,#02H
01B7 FF                MOV     R7,A
01B8 7E00              MOV     R6,#00H
01BA EF                MOV     A,R7
01BB 4E                ORL     A,R6
01BC 7009              JNZ     ?C0055
                                           ; SOURCE LINE # 488
                                           ; SOURCE LINE # 490
01BE 7F01              MOV     R7,#01H
01C0 7E00              MOV     R6,#00H
01C2 120000      E     LCALL   _CyDelayUs
                                           ; SOURCE LINE # 491
01C5 80E8              SJMP    ?C0054
01C7         ?C0055:
                                           ; SOURCE LINE # 494
01C7 904722            MOV     DPTR,#04722H
01CA E0                MOVX    A,@DPTR
01CB FF                MOV     R7,A
01CC EF                MOV     A,R7
01CD 5402              ANL     A,#02H
01CF FF                MOV     R7,A
01D0 7E00              MOV     R6,#00H
01D2 EF                MOV     A,R7
01D3 4E                ORL     A,R6
01D4 600D              JZ      ?C0057
01D6 904722            MOV     DPTR,#04722H
01D9 E0                MOVX    A,@DPTR
01DA FF                MOV     R7,A
01DB EF                MOV     A,R7
01DC 13                RRC     A
01DD 13                RRC     A
01DE 543F              ANL     A,#03FH
01E0 FF                MOV     R7,A
01E1 8002              SJMP    ?C0058
01E3         ?C0057:
01E3 7FFF              MOV     R7,#0FFH
01E5         ?C0058:
01E5 EF                MOV     A,R7
01E6 7007              JNZ     ?C0056
                                           ; SOURCE LINE # 495
                                           ; SOURCE LINE # 496
01E8 900000      R     MOV     DPTR,#status
01EB E4                CLR     A
01EC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 497
01ED 8006              SJMP    ?C0045
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 27  

01EF         ?C0056:
                                           ; SOURCE LINE # 499
                                           ; SOURCE LINE # 500
01EF 900000      R     MOV     DPTR,#status
01F2 74FF              MOV     A,#0FFH
01F4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 501
                                           ; SOURCE LINE # 502
                                           ; SOURCE LINE # 503
                                           ; SOURCE LINE # 504
01F5         ?C0045:
                                           ; SOURCE LINE # 505
01F5 120000      E     LCALL   CySpcUnlock
                                           ; SOURCE LINE # 506
01F8 8006              SJMP    ?C0043
01FA         ?C0044:
                                           ; SOURCE LINE # 508
                                           ; SOURCE LINE # 509
01FA 900000      R     MOV     DPTR,#status
01FD 7404              MOV     A,#04H
01FF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 510
                                           ; SOURCE LINE # 511
0200         ?C0043:
                                           ; SOURCE LINE # 513
0200 900000      R     MOV     DPTR,#status
0203 E0                MOVX    A,@DPTR
0204 FF                MOV     R7,A
                                           ; SOURCE LINE # 514
0205         ?C0061:
0205 22                RET     
             ; FUNCTION _CyWriteRowFull (END)

             ; FUNCTION _CyFlash_SetWaitCycles (BEGIN)
                                           ; SOURCE LINE # 530
0000 900000      R     MOV     DPTR,#freq
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 531
                                           ; SOURCE LINE # 535
0005 120000      E     LCALL   CyEnterCriticalSection
0008 900000      R     MOV     DPTR,#interruptState
000B EF                MOV     A,R7
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 543
000D 900000      R     MOV     DPTR,#freq
0010 E0                MOVX    A,@DPTR
0011 FF                MOV     R7,A
0012 EF                MOV     A,R7
0013 C3                CLR     C
0014 9416              SUBB    A,#016H
0016 5014              JNC     ?C0062
                                           ; SOURCE LINE # 544
                                           ; SOURCE LINE # 545
0018 904800            MOV     DPTR,#04800H
001B E0                MOVX    A,@DPTR
001C FF                MOV     R7,A
001D EF                MOV     A,R7
001E 543F              ANL     A,#03FH
0020 FF                MOV     R7,A
0021 EF                MOV     A,R7
0022 4440              ORL     A,#040H
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 28  

0024 FF                MOV     R7,A
0025 904800            MOV     DPTR,#04800H
0028 EF                MOV     A,R7
0029 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 547
002A 8043              SJMP    ?C0063
002C         ?C0062:
                                           ; SOURCE LINE # 548
002C 900000      R     MOV     DPTR,#freq
002F E0                MOVX    A,@DPTR
0030 FF                MOV     R7,A
0031 EF                MOV     A,R7
0032 C3                CLR     C
0033 942C              SUBB    A,#02CH
0035 5014              JNC     ?C0064
                                           ; SOURCE LINE # 549
                                           ; SOURCE LINE # 550
0037 904800            MOV     DPTR,#04800H
003A E0                MOVX    A,@DPTR
003B FF                MOV     R7,A
003C EF                MOV     A,R7
003D 543F              ANL     A,#03FH
003F FF                MOV     R7,A
0040 EF                MOV     A,R7
0041 4480              ORL     A,#080H
0043 FF                MOV     R7,A
0044 904800            MOV     DPTR,#04800H
0047 EF                MOV     A,R7
0048 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 552
0049 8024              SJMP    ?C0063
004B         ?C0064:
                                           ; SOURCE LINE # 553
004B 900000      R     MOV     DPTR,#freq
004E E0                MOVX    A,@DPTR
004F FF                MOV     R7,A
0050 EF                MOV     A,R7
0051 C3                CLR     C
0052 9443              SUBB    A,#043H
0054 5014              JNC     ?C0066
                                           ; SOURCE LINE # 554
                                           ; SOURCE LINE # 555
0056 904800            MOV     DPTR,#04800H
0059 E0                MOVX    A,@DPTR
005A FF                MOV     R7,A
005B EF                MOV     A,R7
005C 543F              ANL     A,#03FH
005E FF                MOV     R7,A
005F EF                MOV     A,R7
0060 44C0              ORL     A,#0C0H
0062 FF                MOV     R7,A
0063 904800            MOV     DPTR,#04800H
0066 EF                MOV     A,R7
0067 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 557
0068 8005              SJMP    ?C0063
006A         ?C0066:
                                           ; SOURCE LINE # 571
                                           ; SOURCE LINE # 573
006A 7F00              MOV     R7,#00H
006C 120000      E     LCALL   _?CyHalt
                                           ; SOURCE LINE # 574
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 29  

006F         ?C0063:
                                           ; SOURCE LINE # 577
006F 900000      R     MOV     DPTR,#interruptState
0072 E0                MOVX    A,@DPTR
0073 FF                MOV     R7,A
0074 120000      E     LCALL   _CyExitCriticalSection
                                           ; SOURCE LINE # 578
0077 22                RET     
             ; FUNCTION _CyFlash_SetWaitCycles (END)

             ; FUNCTION CyEEPROM_Start (BEGIN)
                                           ; SOURCE LINE # 588
                                           ; SOURCE LINE # 589
                                           ; SOURCE LINE # 592
0000 120000      E     LCALL   CyEnterCriticalSection
0003 900000      R     MOV     DPTR,#interruptState
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 599
0008 9043A0            MOV     DPTR,#043A0H
000B E0                MOVX    A,@DPTR
000C FF                MOV     R7,A
000D EF                MOV     A,R7
000E 4408              ORL     A,#08H
0010 FF                MOV     R7,A
0011 EF                MOV     A,R7
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 600
0013 9043B0            MOV     DPTR,#043B0H
0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 4408              ORL     A,#08H
001B FF                MOV     R7,A
001C EF                MOV     A,R7
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 613
001E 904701            MOV     DPTR,#04701H
0021 74C8              MOV     A,#0C8H
0023 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 620
0024 9043AC            MOV     DPTR,#043ACH
0027 E0                MOVX    A,@DPTR
0028 FF                MOV     R7,A
0029 EF                MOV     A,R7
002A 4410              ORL     A,#010H
002C FF                MOV     R7,A
002D EF                MOV     A,R7
002E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 621
002F 9043BC            MOV     DPTR,#043BCH
0032 E0                MOVX    A,@DPTR
0033 FF                MOV     R7,A
0034 EF                MOV     A,R7
0035 4410              ORL     A,#010H
0037 FF                MOV     R7,A
0038 EF                MOV     A,R7
0039 F0                MOVX    @DPTR,A
003A         ?C0070:
                                           ; SOURCE LINE # 623
003A 904700            MOV     DPTR,#04700H
003D E0                MOVX    A,@DPTR
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 30  

003E FF                MOV     R7,A
003F EF                MOV     A,R7
0040 5420              ANL     A,#020H
0042 FF                MOV     R7,A
0043 7E00              MOV     R6,#00H
0045 EF                MOV     A,R7
0046 4E                ORL     A,R6
0047 60F1              JZ      ?C0070
                                           ; SOURCE LINE # 624
                                           ; SOURCE LINE # 626
0049         ?C0071:
                                           ; SOURCE LINE # 628
0049 900000      R     MOV     DPTR,#interruptState
004C E0                MOVX    A,@DPTR
004D FF                MOV     R7,A
004E 120000      E     LCALL   _CyExitCriticalSection
                                           ; SOURCE LINE # 629
0051 22                RET     
             ; FUNCTION CyEEPROM_Start (END)

             ; FUNCTION CyEEPROM_Stop (BEGIN)
                                           ; SOURCE LINE # 639
                                           ; SOURCE LINE # 640
                                           ; SOURCE LINE # 643
0000 120000      E     LCALL   CyEnterCriticalSection
0003 900000      R     MOV     DPTR,#interruptState
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 645
0008 9043AC            MOV     DPTR,#043ACH
000B E0                MOVX    A,@DPTR
000C FF                MOV     R7,A
000D EF                MOV     A,R7
000E 54EF              ANL     A,#0EFH
0010 FF                MOV     R7,A
0011 EF                MOV     A,R7
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 646
0013 9043BC            MOV     DPTR,#043BCH
0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 54EF              ANL     A,#0EFH
001B FF                MOV     R7,A
001C EF                MOV     A,R7
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 648
001E 900000      R     MOV     DPTR,#interruptState
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 120000      E     LCALL   _CyExitCriticalSection
                                           ; SOURCE LINE # 649
0026 22                RET     
             ; FUNCTION CyEEPROM_Stop (END)

             ; FUNCTION CyEEPROM_ReadReserve (BEGIN)
                                           ; SOURCE LINE # 659
                                           ; SOURCE LINE # 660
                                           ; SOURCE LINE # 662
0000 904702            MOV     DPTR,#04702H
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
C51 COMPILER V9.51   CYFLASH                                                               11/19/2018 18:58:14 PAGE 31  

0005 EF                MOV     A,R7
0006 4401              ORL     A,#01H
0008 FF                MOV     R7,A
0009 EF                MOV     A,R7
000A F0                MOVX    @DPTR,A
000B         ?C0074:
                                           ; SOURCE LINE # 664
000B 904702            MOV     DPTR,#04702H
000E E0                MOVX    A,@DPTR
000F FF                MOV     R7,A
0010 EF                MOV     A,R7
0011 5402              ANL     A,#02H
0013 FF                MOV     R7,A
0014 7E00              MOV     R6,#00H
0016 EF                MOV     A,R7
0017 4E                ORL     A,R6
0018 60F1              JZ      ?C0074
                                           ; SOURCE LINE # 665
                                           ; SOURCE LINE # 667
001A         ?C0075:
                                           ; SOURCE LINE # 668
001A         ?C0076:
001A 22                RET     
             ; FUNCTION CyEEPROM_ReadReserve (END)

             ; FUNCTION CyEEPROM_ReadRelease (BEGIN)
                                           ; SOURCE LINE # 678
                                           ; SOURCE LINE # 679
                                           ; SOURCE LINE # 680
0000 904702            MOV     DPTR,#04702H
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 EF                MOV     A,R7
0006 54FE              ANL     A,#0FEH
0008 FF                MOV     R7,A
0009 EF                MOV     A,R7
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 681
000B 22                RET     
             ; FUNCTION CyEEPROM_ReadRelease (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1375    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =      5      31
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
